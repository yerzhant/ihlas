<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="../WEB-INF/templates/main.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ez="http://xmlns.jcp.org/jsf/composite/ezcomp"
                xmlns:h="http://xmlns.jcp.org/jsf/html">

    <ui:define name="title">Главная</ui:define>

    <ui:define name="body">
                <ez:table id="docs" dialogHeader="Документ"
                          items="#{indigentDocs.items}" selected="#{indigentDocs.selected}"
                          create="#{indigentDocs.create()}" save="#{indigentDocs.save()}" delete="#{indigentDocs.delete()}" cancel="#{indigentDocs.cancel()}" refresh="#{indigentDocs.refresh()}">

                    <p:column headerText="Тип">
                        #{item.docType}
                    </p:column>

                    <p:column headerText="Примечания">
                        #{item.notes}
                    </p:column>

                    <f:facet name="dialog">
                        <p:panelGrid columns="3" rendered="#{not empty indigentDocs.selected}">
                            <p:outputLabel for="docType" value="Тип" />
                            <p:selectOneMenu id="docType" value="#{indigentDocs.selected.docType}">
                                <f:selectItems value="#{docTypes.items}"
                                               var="item"
                                               itemValue="#{item}"/>
                            </p:selectOneMenu>
                            <p:message for="docType" />

                            <p:outputLabel for="notes" value="Примечания" />
                            <p:inputText id="notes" value="#{indigentDocs.selected.notes}" />
                            <p:message for="notes" />

                            <p:outputLabel for="image" value="Документ" />
                            <p:graphicImage id="image" value="#{indigentDocs.image}" cache="false" />
                            <p:message for="image" />
                        </p:panelGrid>

                        <p:fileUpload id="uploader" fileUploadListener="#{indigentDocs.handleFile}" auto="true" update="image" />
                    </f:facet>

                </ez:table>
    </ui:define>

</ui:composition>
